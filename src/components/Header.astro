---
import { Phone, MessageCircle, Menu, X } from 'lucide-react'
---

<header class='sticky top-0 z-50 backdrop-blur-sm bg-white/95 border-b border-line/30 shadow-sm'>
	<div class='max-w-6xl mx-auto flex items-center justify-between px-4 h-16'>
		<div class='flex items-center gap-3'>
			<button
				aria-label='Abrir menú'
				id='menu-btn'
				class='md:hidden p-2 rounded-lg hover:bg-ink/5 text-inkSoft transition-colors'
			>
				<Menu className='h-5 w-5' />
			</button>
			<img class='h-12 w-auto' src='/img/logo-maria-contreras-psicologa.png' alt='Logo' />
		</div>
		<nav class='hidden md:flex items-center gap-6 text-sm font-medium text-inkSoft/80'>
			<a href='#servicios' class='hover:text-ink transition-colors'>Servicios</a>
			<a href='#experiencia' class='hover:text-ink transition-colors'>Experiencia</a>
			<a href='#doctoralia' class='hover:text-ink transition-colors'>Opiniones</a>
			<a href='#contacto' class='hover:text-ink transition-colors'>Contacto</a>
		</nav>
		<div class='flex items-center gap-2'>
			<a
				aria-label='LinkedIn'
				class='hidden sm:flex p-2 rounded-lg hover:bg-ink/5 text-inkSoft transition-colors'
				href='https://www.linkedin.com/in/m-%C3%A1ngeles-contreras-55b85364/'
				rel='noopener'
				target='_blank'
			>
				<svg xmlns='http://www.w3.org/2000/svg' role='img' viewBox='0 0 24 24' class='h-4 w-4 fill-current'
					><title>LinkedIn</title><path
						d='M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.049c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm-1.777 13.019h3.554V9H3.56v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.728v20.543C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.728C24 .774 23.2 0 22.222 0h.003z'
					></path></svg
				>
			</a>
			<a
				class='hidden md:inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-medium bg-accent text-white hover:bg-teal-600 transition-colors shadow-sm'
				href='tel:+34689603837'
			>
				<Phone className='h-4 w-4' />
				<span class='hidden xl:inline'>689603837</span>
				<span class='xl:hidden'>Llamar</span>
			</a>
			<a
				aria-label='Teléfono'
				class='md:hidden p-2 rounded-lg hover:bg-accent/10 text-accent transition-colors'
				href='tel:+34689603837'><Phone className='h-4 w-4' /></a
			>
			<a
				aria-label='WhatsApp'
				class='hidden sm:flex md:flex p-2 rounded-lg hover:bg-green-500/10 text-green-600 transition-colors'
				href='https://api.whatsapp.com/send?phone=34689603837&text=Hola,%20me%20gustar%C3%ADa%20consultar%20disponibilidad%20para%20una%20cita.'
				target='_blank'
				rel='noopener'><MessageCircle className='h-4 w-4' /></a
			>
		</div>
	</div>
</header>

<!-- Mobile Menu Overlay - OUTSIDE header for proper fixed positioning -->
<div
	id='mobile-nav'
	class='md:hidden fixed inset-0 z-[60] opacity-0 pointer-events-none transition-opacity duration-300'
>
	<!-- Backdrop -->
	<div class='absolute inset-0 bg-black/30 backdrop-blur-sm'></div>
	<!-- Menu Panel -->
	<div
		class='absolute top-0 right-0 w-80 max-w-[85vw] h-full bg-white shadow-2xl transform translate-x-full transition-transform duration-300'
	>
		<!-- Header -->
		<div class='flex items-center justify-between p-4 border-b border-line/20'>
			<div class='flex items-center gap-3'>
				<img class='h-10 w-auto' src='/img/logo-maria-contreras-psicologa.png' alt='Logo' />
			</div>
			<button
				aria-label='Cerrar menú'
				id='close-menu'
				class='p-2 rounded-lg hover:bg-ink/5 text-inkSoft transition-colors'
			>
				<X className='h-5 w-5' />
			</button>
		</div>
		<!-- Navigation Links -->
		<div class='p-4 space-y-2'>
			<a href='#servicios' class='nav-link'>Servicios</a>
			<a href='#sobre-mi' class='nav-link'>Sobre mí</a>
			<a href='#enfoque' class='nav-link'>Mi enfoque</a>
			<a href='#experiencia' class='nav-link'>Experiencia</a>
			<a href='#preguntas' class='nav-link'>FAQ</a>
			<a href='#doctoralia' class='nav-link'>Opiniones</a>
			<a href='#contacto' class='nav-link'>Contacto</a>
		</div>
		<!-- Action Buttons -->
		<div class='absolute bottom-0 left-0 right-0 p-4 border-t border-line/20 bg-baseAlt/30 space-y-3'>
			<a href='tel:+34689603837' class='mobile-btn mobile-btn-primary'>
				<Phone className='h-4 w-4' /> Llamar ahora
			</a>
			<a
				href='https://api.whatsapp.com/send?phone=34689603837&text=Hola,%20me%20gustar%C3%ADa%20consultar%20disponibilidad%20para%20una%20cita.'
				target='_blank'
				rel='noopener'
				class='mobile-btn mobile-btn-secondary'
			>
				<MessageCircle className='h-4 w-4' /> WhatsApp
			</a>
			<a
				href='https://www.linkedin.com/in/m-%C3%A1ngeles-contreras-55b85364/'
				target='_blank'
				rel='noopener'
				class='mobile-btn mobile-btn-secondary'
			>
				<svg xmlns='http://www.w3.org/2000/svg' role='img' viewBox='0 0 24 24' class='h-4 w-4 fill-current'
					><path
						d='M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.049c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm-1.777 13.019h3.554V9H3.56v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.728v20.543C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.728C24 .774 23.2 0 22.222 0h.003z'
					></path></svg
				>
				LinkedIn
			</a>
		</div>
	</div>
</div>
<script is:inline>
	const body = document.body
	const openBtn = document.getElementById('menu-btn')
	const mobileNav = document.getElementById('mobile-nav')
	const menuPanel = mobileNav?.querySelector('div:nth-child(2)') // Select the menu panel specifically
	const closeBtn = document.getElementById('close-menu')

	function openMenu() {
		if (!mobileNav || !menuPanel) return

		// Show overlay
		mobileNav.classList.remove('pointer-events-none', 'opacity-0')
		mobileNav.classList.add('opacity-100')

		// Slide in panel with slight delay for smooth animation
		setTimeout(() => {
			menuPanel.classList.remove('translate-x-full')
			menuPanel.classList.add('translate-x-0')
		}, 50)

		// Prevent body scroll
		body.style.overflow = 'hidden'
	}

	function closeMenu() {
		if (!mobileNav || !menuPanel) return

		// Slide out panel
		menuPanel.classList.remove('translate-x-0')
		menuPanel.classList.add('translate-x-full')

		// Hide overlay after panel animation
		setTimeout(() => {
			mobileNav.classList.remove('opacity-100')
			mobileNav.classList.add('opacity-0', 'pointer-events-none')
		}, 300)

		// Restore body scroll
		body.style.overflow = ''
	}

	// Event listeners
	openBtn?.addEventListener('click', openMenu)
	closeBtn?.addEventListener('click', closeMenu)

	// Close on backdrop click
	mobileNav?.addEventListener('click', (e) => {
		// Only close if clicking the backdrop (first child div)
		if (e.target === mobileNav || e.target === mobileNav.firstElementChild) {
			closeMenu()
		}
	})

	// Close on nav link click
	mobileNav?.querySelectorAll('a').forEach((link) => {
		link.addEventListener('click', closeMenu)
	})

	// Close on escape key
	document.addEventListener('keydown', (e) => {
		if (e.key === 'Escape' && !mobileNav?.classList.contains('pointer-events-none')) {
			closeMenu()
		}
	})
</script>

<style>
	.nav-link {
		@apply block py-3 px-4 rounded-lg text-inkSoft hover:text-ink hover:bg-ink/5 transition-all duration-200 font-medium;
	}
	.mobile-btn {
		@apply w-full inline-flex items-center justify-center gap-2 rounded-full px-4 py-3 text-sm font-medium transition-all duration-200;
	}
	.mobile-btn-primary {
		@apply bg-accent text-white hover:bg-teal-600 shadow-sm;
	}
	.mobile-btn-whatsapp {
		@apply bg-green-600 text-white hover:bg-green-700 shadow-sm;
	}
	.mobile-btn-secondary {
		@apply bg-inkSoft/10 text-inkSoft hover:bg-inkSoft/20;
	}
</style>
